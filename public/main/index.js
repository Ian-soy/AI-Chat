"use strict";const o=require("electron"),r=require("path");function l(e){const n=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const t in e)if(t!=="default"){const a=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,a.get?a:{enumerable:!0,get:()=>e[t]})}}return n.default=e,Object.freeze(n)}const i=l(r),c=o.nativeImage.createFromPath(i.join(__dirname,"..","logo.png"));o.app.whenReady().then(()=>{const e=new o.BrowserWindow({width:900,height:650,icon:i.join(__dirname,"..","logo.png"),titleBarStyle:"hidden",frame:!1,show:!1,center:!0,webPreferences:{preload:i.join(__dirname,"..","preload/index.js"),contextIsolation:!0}});e.once("ready-to-show",()=>{e.show()}),process.env.VITE_DEV_SERVER_URL?e.loadURL(process.env.VITE_DEV_SERVER_URL):e.loadFile("dist/index.html");const n=new o.Tray(c),t=o.Menu.buildFromTemplate([{label:"显示",click:()=>e.show()},{label:"退出",role:"quit"}]);n.setToolTip("Space Helper"),n.setContextMenu(t),o.ipcMain.on("window-minimize",()=>e.minimize()),o.ipcMain.on("window-toggle-maximize",()=>{e.isMaximized()?e.unmaximize():e.maximize()}),o.ipcMain.on("window-close",()=>e.close())});o.app.commandLine.appendSwitch("disable-features","OutOfBlinkCors");o.app.on("window-all-closed",()=>{o.app.quit()});o.app.on("browser-window-created",()=>{console.log("window-created")});process.defaultApp?process.argv.length>=2&&(o.app.removeAsDefaultProtocolClient("ai-chat"),console.log("connot work")):o.app.setAsDefaultProtocolClient("ai-chat");
